# django-humans-txt
# Makefile


PHONY: clean build register upload create-virtualenv pip-install startproject makemessages compilemessages merge-and-push-all help
MANAGE=$(PWD)/tmp/$(PROJECT_NAME)/manage.py


clean:
	deactivate && rm -rf build dist django_humans_txt.egg-info tmp

build:
	./setup.py bdist_wheel sdist

upload:
	./setup.py bdist_wheel sdist upload

create-virtualenv:
	virtualenv tmp/.env/

pip-install:
	pip install Django

startproject:
	cd tmp && django-admin.py startproject $(PROJECT_NAME)

makemessages:
	cd $(PROJECT_NAME);\
	for locale in `ls locale`; do\
		$(MANAGE) makemessages --locale=$$locale --extension=py,html,txt;\
	done

compilemessages:
	$(MANAGE) compilemessages

merge-and-push-all:
	git co master && git merge dev && git co dev && git push --all && git push --tags

help:
	@echo "    clean:"
	@echo "        Remove useless and autogenerated files."
	@echo "    build:"
	@echo "        Build package."
	@echo "    upload:"
	@echo "        Upload package to PyPI."
	@echo "    create-virtualenv:"
	@echo "        Creates virtualenv."
	@echo "    pip-install:"
	@echo "        Install development requirements."
	@echo "    start-project:"
	@echo "        Create temporary django project to harvest and compile messages."
	@echo "    makemessages:"
	@echo "        Harvest translations."
	@echo "    compilemessages:"
	@echo "        Compile translations."
	@echo "    merge-and-push-all:"
	@echo "        Merge dev branch to master and push all commits and all tags."
